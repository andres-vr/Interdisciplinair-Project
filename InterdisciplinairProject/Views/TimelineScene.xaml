<UserControl x:Class="InterdisciplinairProject.Views.TimelineScene"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:InterdisciplinairProject.Views" 
             xmlns:viewmodels="clr-namespace:InterdisciplinairProject.ViewModels"
             d:DataContext="{d:DesignInstance Type=viewmodels:TimeLineViewModel}"
             mc:Ignorable="d" 
             Width="120"
             VerticalAlignment="Stretch">

    <Border BorderBrush="#E0E0E0" BorderThickness="2" CornerRadius="0" Padding="5" Margin="0">
        <Border.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                <GradientStop Color="#FFFFFF" Offset="0"/>
                <GradientStop Color="#F8F9FA" Offset="1"/>
            </LinearGradientBrush>
        </Border.Background>
        <Border.Effect>
            <DropShadowEffect Color="#000000" Opacity="0.15" BlurRadius="12" ShadowDepth="4" Direction="270"/>
        </Border.Effect>

        <Grid>
            <!-- Left arrow button (correct left pointing icon) -->
            <Button Height="25" Width="25"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top"
                    Margin="5,5,0,0"
                    Command="{Binding MoveSceneCommand}"
                    CommandParameter="left"
                    ToolTip="Move scene left">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="#E3F2FD" BorderBrush="#2196F3" BorderThickness="1" CornerRadius="6">
                            <Viewbox Width="12" Height="12" Margin="2">
                                <Canvas Width="16" Height="16">
                                    <!-- Left pointing triangle -->
                                    <Path Data="M10,2 L4,8 L10,14"
                                          Stroke="#2196F3"
                                          StrokeThickness="2"
                                          StrokeStartLineCap="Round"
                                          StrokeEndLineCap="Round"
                                          StrokeLineJoin="Round"
                                          Fill="Transparent"/>
                                </Canvas>
                            </Viewbox>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#BBDEFB"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Button.Template>
            </Button>


            <!-- Right arrow button (correct right pointing icon) -->
            <Button Height="25" Width="25"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Top"
                    Margin="0,5,5,0"
                    Command="{Binding MoveSceneCommand}"
                    CommandParameter="right"
                    ToolTip="Move scene right">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="#E3F2FD" BorderBrush="#2196F3" BorderThickness="1" CornerRadius="6">
                            <Viewbox Width="12" Height="12" Margin="2">
                                <Canvas Width="16" Height="16">
                                    <!-- Right pointing triangle -->
                                    <Path Data="M6,2 L12,8 L6,14"
                                          Stroke="#2196F3"
                                          StrokeThickness="2"
                                          StrokeStartLineCap="Round"
                                          StrokeEndLineCap="Round"
                                          StrokeLineJoin="Round"
                                          Fill="Transparent"/>
                                </Canvas>
                            </Viewbox>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#BBDEFB"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Button.Template>
            </Button>


            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <TextBlock Text="{Binding Name}"
                           FontWeight="SemiBold"
                           FontSize="16"
                           Foreground="#2C3E50"
                           HorizontalAlignment="Center"
                           Margin="0,8,0,0"
                           TextWrapping="Wrap"
                           MaxWidth="110"/>
            </StackPanel>

            <Button Height="25" Width="25" 
                    VerticalAlignment="Bottom" 
                    HorizontalAlignment="Center"
                    Command="{Binding DataContext.DeleteTimelineSceneCommand, RelativeSource={RelativeSource AncestorType={x:Type local:ShowbuilderView}}}"
                    CommandParameter="{Binding SceneModel}"
                    ToolTip="Delete scene" 
                    Margin="0,0,0,5">
                <Button.Template>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border x:Name="border" Background="#FFEBEE" BorderBrush="#F44336" BorderThickness="1" CornerRadius="6">
                            <Viewbox Width="12" Height="12" Margin="2">
                                <!-- simple X icon -->
                                <Canvas Width="16" Height="16">
                                    <Path Data="M2,2 L14,14 M14,2 L2,14"
                                          Stroke="#F44336"
                                          StrokeThickness="2"
                                          StrokeStartLineCap="Round"
                                          StrokeEndLineCap="Round"/>
                                </Canvas>
                            </Viewbox>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Opacity" Value="0.95"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Button.Template>
            </Button>
            <local:SceneDurationControl 
                     HorizontalAlignment="Right"
                     VerticalAlignment="Center"
                     Margin="0,0,-25,0"/>
        </Grid>
    </Border>
</UserControl>
